sudo: false
dist: trusty
language: node_js
env:
  - BROWSER=Chrome_travis_ci
  - BROWSER=bs_safari_11
matrix:
  allow_failures:
    - env: BROWSER=bs_safari_11
addons:
  chrome: stable
before_install:
  - export CHROME_BIN=google-chrome-stable
  - export DISPLAY=:99.0
  - sh -e /etc/init.d/xvfb start
  - curl -o- -L https://yarnpkg.com/install.sh | bash -s -- --version 1.1.0
  - export PATH=$HOME/.yarn/bin:$PATH
install:
  - yarn
cache:
  yarn: true
script:
  - yarn lint
  - yarn test --single-run --browsers=$BROWSER
before_deploy:
  - NODE_ENV=production yarn build
deploy:
  provider: s3
  acl: public_read
  cache_control: max-age=30
  access_key_id: AKIAJPCMT5BOKFDIIAQQ
  secret_access_key:
    secure: gfCWQoWH5z6sqHhCzqdo786qJVmkPx4HMEHJqFwyLg4/xaiLAqoy7XLlAayURfcMKN6vAJtsbZTaThAQ/VmYC2jntaLZYmurHk/A6il9Ri9cTO9Y0jeJ2X/yLCf4i7gFJWDMzNWZYvREKR+FWEyoKoEE5ET4BYNJtYnevlxwIDgBVPa9YZ5ZFKUiupjXRrLd3XIuA8TbYEaT3UhFjDRgQkh14Qze3TfI13nuZtdy9R9iwfLylos8UmWS0TZ05lY95Xze63iVDIOHcNnmrfBb1b4Ok8yROvH5GS7NvmQ/+9lpTHT/Cqt1XdnBzAwUX6z88lDnuPs/vavPetZWKb78nOYZVNbv3eJbkikf2M8EgK7zvVNzlgRFf6hVAcNmGo3HAEJ4X7BtEu4gMvZsk66bLwwInlA7SEqbqx7zw3cpm/mup65IIkN2D7LFGrfhyfJdC91KAXcVK6Elogzo0bHp42vEr2b5VDY574D/CPfGTMfvZrm15MdqzEjQrNQmQuZIilsd85dJKe514WUsHZOrtdwgRTKSZWXDp0mdlfGcx6hTx9ykpijZrrsPRWwcrrUXZMBbdLt4ro28JqIyO7dHlDKf1eQ+KtnjxHn/LtYf+csbYFVZa+y5qEDJJ1w6mbpdBl8kEg1tuCNa2xy51it9YrHlY2Ne4BBmBkFKd/Rud+I=
  bucket: folio.frontside.io
  region: us-east-2
  skip_cleanup: true
  local_dir: dist
  on:
    branch: master
notifications:
  webhooks:
    urls:
      - https://fs-bitbot.herokuapp.com/travis
